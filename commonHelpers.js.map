{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\niziToast.settings({\n  position: \"topRight\",\n  timeout: 5000,\n  resetOnHover: true,\n  transitionIn: \"flipInX\",\n  transitionOut: \"flipOutX\"\n});\n\nconst apiUrl = \"https://pixabay.com/api/\";\nconst apiKey = \"41671607-e33db59ab0332d081087354c8\";\n\nconst form = document.querySelector(\".search-form\");\nconst loader = document.querySelector(\".loader\");\nconst gallery = document.querySelector(\".gallery\");\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nform.addEventListener(\"submit\", doApiRequest);\n\nfunction doApiRequest(e) {\n  e.preventDefault();\n\n  const searchStr = form.elements.searchStr.value.trim();\n  if (!searchStr) {\n    form.reset();\n    iziToast.error({message: \"The search field cannot be empty!\"});\n    return;\n  }\n\n  gallery.innerHTML = \"\";\n  loader.style.display = \"block\";\n\n  const reqParams = new URLSearchParams({\n    key: apiKey,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    per_page: 30,\n    q: searchStr\n  });\n\n\n  fetch(`${apiUrl}?${reqParams}`)\n\n    .then((response) => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n\n    .then((imagesObj) => {\n      loader.style.display = \"none\";\n      if (imagesObj.hits.length == 0) {\n        iziToast.warning({message: \"Sorry, there are no images matching<br> your search query.Please try again!\"});\n        return;\n      }\n      updateGalleryMarkup(imagesObj.hits);\n    })\n\n    .catch((error) => iziToast.error({message: `Api request error: ${error}`}))\n\n    .finally(() => {\n      form.reset();\n    });\n}\n\nfunction updateGalleryMarkup(images) {\n  gallery.insertAdjacentHTML(\"beforeend\", images.map(fillGalleryCard).join(\"\"));\n  lightbox.refresh();\n}\n\nconst fillGalleryCard = ({\n  largeImageURL,\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n  return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        <ul class=\"metabox-list\">\n          <li class=\"mbox-info\">\n            <p class=\"mbox-info-title\">Likes</p>\n            <span class=\"mbox-info-descr\">${likes}</span>\n          </li>\n          <li class=\"mbox-info\">\n            <p class=\"mbox-info-title\">Views</p>\n            <span class=\"mbox-info-descr\">${views}</span>\n          </li>\n          <li class=\"mbox-info\">\n            <p class=\"mbox-info-title\">Comments</p>\n            <span class=\"mbox-info-descr\">${comments}</span>\n          </li>\n          <li class=\"mbox-info\">\n            <p class=\"mbox-info-title\">Downloads</p>\n            <span class=\"mbox-info-descr\">${downloads}</span>\n          </li>\n        </ul>\n      </a>\n    </li>`;\n};\n\n"],"names":["iziToast","apiUrl","apiKey","form","loader","gallery","lightbox","SimpleLightbox","doApiRequest","e","searchStr","reqParams","response","imagesObj","updateGalleryMarkup","error","images","fillGalleryCard","largeImageURL","webformatURL","tags","likes","views","comments","downloads"],"mappings":"6vBAKAA,EAAS,SAAS,CAChB,SAAU,WACV,QAAS,IACT,aAAc,GACd,aAAc,UACd,cAAe,UACjB,CAAC,EAED,MAAMC,EAAS,2BACTC,EAAS,qCAETC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDJ,EAAK,iBAAiB,SAAUK,CAAY,EAE5C,SAASA,EAAaC,EAAG,CACvBA,EAAE,eAAc,EAEhB,MAAMC,EAAYP,EAAK,SAAS,UAAU,MAAM,OAChD,GAAI,CAACO,EAAW,CACdP,EAAK,MAAK,EACVH,EAAS,MAAM,CAAC,QAAS,mCAAmC,CAAC,EAC7D,MACD,CAEDK,EAAQ,UAAY,GACpBD,EAAO,MAAM,QAAU,QAEvB,MAAMO,EAAY,IAAI,gBAAgB,CACpC,IAAKT,EACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,EAAGQ,CACP,CAAG,EAGD,MAAM,GAAGT,KAAUU,GAAW,EAE3B,KAAMC,GAAa,CAClB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EAEA,KAAMC,GAAc,CAEnB,GADAT,EAAO,MAAM,QAAU,OACnBS,EAAU,KAAK,QAAU,EAAG,CAC9Bb,EAAS,QAAQ,CAAC,QAAS,6EAA6E,CAAC,EACzG,MACD,CACDc,EAAoBD,EAAU,IAAI,CACxC,CAAK,EAEA,MAAOE,GAAUf,EAAS,MAAM,CAAC,QAAS,sBAAsBe,GAAO,CAAC,CAAC,EAEzE,QAAQ,IAAM,CACbZ,EAAK,MAAK,CAChB,CAAK,CACL,CAEA,SAASW,EAAoBE,EAAQ,CACnCX,EAAQ,mBAAmB,YAAaW,EAAO,IAAIC,CAAe,EAAE,KAAK,EAAE,CAAC,EAC5EX,EAAS,QAAO,CAClB,CAEA,MAAMW,EAAkB,CAAC,CACvB,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,IACS;AAAA;AAAA,sCAE6BN;AAAA,0CACIC,WAAsBC;AAAA;AAAA;AAAA;AAAA,4CAIpBC;AAAA;AAAA;AAAA;AAAA,4CAIAC;AAAA;AAAA;AAAA;AAAA,4CAIAC;AAAA;AAAA;AAAA;AAAA,4CAIAC;AAAA;AAAA;AAAA;"}